{"ast":null,"code":"import _regeneratorRuntime from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext}from\"react\";import Input from\"../../shared/components/FormElements/Input\";import Button from\"../../shared/components/FormElements/Button\";import{VALIDATOR_REQUIRE,VALIDATOR_MINLENGTH}from\"../../shared/util/validators\";import{useForm}from\"../../shared/hooks/form-hook\";import\"./PlaceForm.css\";import{useHttpClient}from\"../../shared/hooks/http-hook\";import{AuthContext}from\"../../shared/context/auth-context\";import LoadingSpinner from\"../../shared/components/UIElements/LoadingSpinner\";import ErrorModal from\"../../shared/components/UIElements/ErrorModal\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";import ImageUpload from\"../../shared/components/FormElements/ImageUpload\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewPlace=function NewPlace(){var auth=useContext(AuthContext);var history=useHistory();var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var _useForm=useForm({title:{value:\"\",isValid:false},description:{value:\"\",isValid:false},address:{value:\"\",isValid:false},image:{value:null,isValid:false}},false),_useForm2=_slicedToArray(_useForm,2),formState=_useForm2[0],inputHandler=_useForm2[1];var placeSubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();formData=new FormData();formData.append(\"title\",formState.inputs.title.value);formData.append(\"description\",formState.inputs.description.value);formData.append(\"address\",formState.inputs.address.value);formData.append(\"creator\",auth.userId);formData.append(\"image\",formState.inputs.image.value);_context.prev=7;_context.next=10;return sendRequest(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/places\"),\"POST\",formData,{Authorization:\"Bearer \"+auth.token});case 10:history.push(\"/\");_context.next=15;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](7);case 15:case\"end\":return _context.stop();}},_callee,null,[[7,13]]);}));return function placeSubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/_jsxs(\"form\",{className:\"place-form\",onSubmit:placeSubmitHandler,children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(Input,{id:\"title\",element:\"input\",type:\"text\",label:\"Title\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid title.\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"description\",element:\"textarea\",label:\"Description\",validators:[VALIDATOR_MINLENGTH(5)],errorText:\"Please enter a valid description (at least 5 characters).\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{id:\"address\",element:\"input\",label:\"Address\",validators:[VALIDATOR_REQUIRE()],errorText:\"Please enter a valid address.\",onInput:inputHandler}),/*#__PURE__*/_jsx(ImageUpload,{id:\"image\",onInput:inputHandler,errorText:\"Please Provide an image.\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formState.isValid,children:\"ADD PLACE\"})]})]});};export default NewPlace;","map":{"version":3,"names":["React","useContext","Input","Button","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","useHttpClient","AuthContext","LoadingSpinner","ErrorModal","useHistory","ImageUpload","jsx","_jsx","jsxs","_jsxs","NewPlace","auth","history","_useHttpClient","isLoading","error","sendRequest","clearError","_useForm","title","value","isValid","description","address","image","_useForm2","_slicedToArray","formState","inputHandler","placeSubmitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","formData","wrap","_callee$","_context","prev","next","preventDefault","FormData","append","inputs","userId","concat","process","env","REACT_APP_BACKEND_URL","Authorization","token","push","t0","stop","_x","apply","arguments","Fragment","children","onClear","className","onSubmit","asOverlay","id","element","type","label","validators","errorText","onInput","disabled"],"sources":["/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/src/places/pages/NewPlace.js"],"sourcesContent":["import React, { useContext } from \"react\";\n\nimport Input from \"../../shared/components/FormElements/Input\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH,\n} from \"../../shared/util/validators\";\nimport { useForm } from \"../../shared/hooks/form-hook\";\nimport \"./PlaceForm.css\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport ImageUpload from \"../../shared/components/FormElements/ImageUpload\";\nconst NewPlace = () => {\n  const auth = useContext(AuthContext);\n  const history = useHistory();\n\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const [formState, inputHandler] = useForm(\n    {\n      title: {\n        value: \"\",\n        isValid: false,\n      },\n      description: {\n        value: \"\",\n        isValid: false,\n      },\n      address: {\n        value: \"\",\n        isValid: false,\n      },\n      image: {\n        value: null,\n        isValid: false,\n      },\n    },\n    false\n  );\n\n  const placeSubmitHandler = async (event) => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"title\", formState.inputs.title.value);\n    formData.append(\"description\", formState.inputs.description.value);\n    formData.append(\"address\", formState.inputs.address.value);\n    formData.append(\"creator\", auth.userId);\n    formData.append(\"image\", formState.inputs.image.value);\n\n    try {\n      await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/places`, \"POST\", formData, {\n        Authorization: \"Bearer \" + auth.token,\n      });\n      history.push(\"/\");\n    } catch (error) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <form className=\"place-form\" onSubmit={placeSubmitHandler}>\n        {isLoading && <LoadingSpinner asOverlay />}\n        <Input\n          id=\"title\"\n          element=\"input\"\n          type=\"text\"\n          label=\"Title\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid title.\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"description\"\n          element=\"textarea\"\n          label=\"Description\"\n          validators={[VALIDATOR_MINLENGTH(5)]}\n          errorText=\"Please enter a valid description (at least 5 characters).\"\n          onInput={inputHandler}\n        />\n        <Input\n          id=\"address\"\n          element=\"input\"\n          label=\"Address\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid address.\"\n          onInput={inputHandler}\n        />\n        <ImageUpload\n          id=\"image\"\n          onInput={inputHandler}\n          errorText=\"Please Provide an image.\"\n        ></ImageUpload>\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          ADD PLACE\n        </Button>\n      </form>\n    </React.Fragment>\n  );\n};\n\nexport default NewPlace;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}