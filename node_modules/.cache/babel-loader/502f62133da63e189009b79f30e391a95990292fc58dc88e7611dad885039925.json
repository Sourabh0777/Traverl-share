{"ast":null,"code":"import _regeneratorRuntime from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import Card from\"../../shared/components/UIElements/Card\";import Button from\"../../shared/components/FormElements/Button\";import Modal from\"../../shared/components/UIElements/Modal\";import Map from\"../../shared/components/UIElements/Map\";import{AuthContext}from\"../../shared/context/auth-context\";import\"./PlaceItem.css\";import ErrorModal from\"../../shared/components/UIElements/ErrorModal\";import LoadingSpinner from\"../../shared/components/UIElements/LoadingSpinner\";import{useHttpClient}from\"../../shared/hooks/http-hook\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlaceItem=function PlaceItem(props){var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMap=_useState2[0],setShowMap=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmModal=_useState4[0],setShowConfirmModal=_useState4[1];var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var openMapHandler=function openMapHandler(){return setShowMap(true);};var closeMapHandler=function closeMapHandler(){return setShowMap(false);};var showDeleteWarningHandler=function showDeleteWarningHandler(){setShowConfirmModal(true);};var cancelDeleteHandler=function cancelDeleteHandler(){setShowConfirmModal(false);};var confirmDeleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setShowConfirmModal(false);_context.prev=1;_context.next=4;return sendRequest(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/places/\").concat(props.id),\"DELETE\",null,{Authorization:\"Bearer \"+auth.token});case 4:props.onDelete(props.id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);case 9:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function confirmDeleteHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true})}),/*#__PURE__*/_jsx(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsx(Button,{onClick:closeMapHandler,children:\"CLOSE\"}),children:/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(Map,{center:props.coordinates,zoom:16})})}),/*#__PURE__*/_jsx(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:cancelDeleteHandler,children:\"CANCEL\"}),/*#__PURE__*/_jsx(Button,{danger:true,onClick:confirmDeleteHandler,children:\"DELETE\"})]}),children:/*#__PURE__*/_jsx(\"p\",{children:\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"place-item\",children:/*#__PURE__*/_jsxs(Card,{className:\"place-item__content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"place-item__image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_ASSET_URL).concat(props.image),alt:props.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:props.title}),/*#__PURE__*/_jsx(\"h3\",{children:props.address}),/*#__PURE__*/_jsx(\"p\",{children:props.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__actions\",children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:openMapHandler,children:\"VIEW ON MAP\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{to:\"/places/\".concat(props.id),children:\"EDIT\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{danger:true,onClick:showDeleteWarningHandler,children:\"DELETE\"})]})]})})]});};export default PlaceItem;","map":{"version":3,"names":["React","useState","useContext","Card","Button","Modal","Map","AuthContext","ErrorModal","LoadingSpinner","useHttpClient","jsx","_jsx","jsxs","_jsxs","PlaceItem","props","auth","_useState","_useState2","_slicedToArray","showMap","setShowMap","_useState3","_useState4","showConfirmModal","setShowConfirmModal","_useHttpClient","isLoading","error","sendRequest","clearError","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","concat","process","env","REACT_APP_BACKEND_URL","id","Authorization","token","onDelete","t0","stop","apply","arguments","Fragment","children","onClear","className","asOverlay","show","onCancel","header","address","contentClass","footerClass","footer","onClick","center","coordinates","zoom","inverse","danger","src","REACT_APP_ASSET_URL","image","alt","title","description","userId","creatorId","to"],"sources":["/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/src/places/components/PlaceItem.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\n\nimport Card from \"../../shared/components/UIElements/Card\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport Modal from \"../../shared/components/UIElements/Modal\";\nimport Map from \"../../shared/components/UIElements/Map\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport \"./PlaceItem.css\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nconst PlaceItem = (props) => {\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n\n    try {\n      await sendRequest(\n        `${process.env.REACT_APP_BACKEND_URL}/places/${props.id}`,\n        \"DELETE\",\n        null,\n        { Authorization: \"Bearer \" + auth.token }\n      );\n      props.onDelete(props.id);\n    } catch (error) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      {isLoading && (\n        <div className=\"center\">\n          <LoadingSpinner asOverlay />\n        </div>\n      )}\n\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n        </div>\n      </Modal>\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>\n          Do you want to proceed and delete this place? Please note that it\n          can't be undone thereafter.\n        </p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          <div className=\"place-item__image\">\n            <img\n              src={`${process.env.REACT_APP_ASSET_URL}${props.image}`}\n              alt={props.title}\n            />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>\n              VIEW ON MAP\n            </Button>\n            {auth.userId === props.creatorId && (\n              <Button to={`/places/${props.id}`}>EDIT</Button>\n            )}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default PlaceItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}