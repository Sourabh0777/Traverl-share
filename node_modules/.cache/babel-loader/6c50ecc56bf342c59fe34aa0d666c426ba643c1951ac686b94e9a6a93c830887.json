{"ast":null,"code":"import _regeneratorRuntime from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect,useRef,useState}from\"react\";export var useHttpClient=function useHttpClient(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],seterror=_useState4[1];var activeHttpRequest=useRef([]);var sendRequest=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,body,headers,httpAbortCtrl,response,responseData,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:\"GET\";body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{};setIsLoading(true);httpAbortCtrl=new AbortController();activeHttpRequest.current.push(httpAbortCtrl);_context.prev=6;_context.next=9;return fetch(url,{method:method,body:body,headers:headers,signal:httpAbortCtrl.signal});case 9:response=_context.sent;_context.next=12;return response.json();case 12:responseData=_context.sent;activeHttpRequest.current=activeHttpRequest.current.filter(function(reqCtrl){return reqCtrl!==httpAbortCtrl;});if(response.ok){_context.next=16;break;}throw new Error(responseData.message);case 16:setIsLoading(false);return _context.abrupt(\"return\",responseData);case 20:_context.prev=20;_context.t0=_context[\"catch\"](6);seterror(_context.t0.message);setIsLoading(false);throw _context.t0;case 25:case\"end\":return _context.stop();}},_callee,null,[[6,20]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=function clearError(){seterror(null);};useEffect(function(){return function(){activeHttpRequest.current.forEach(function(abortCtrl){return abortCtrl.abort();});};},[]);return{isLoading:isLoading,error:error,sendRequest:sendRequest,clearError:clearError};};","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","useHttpClient","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","error","seterror","activeHttpRequest","sendRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","method","body","headers","httpAbortCtrl","response","responseData","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","AbortController","current","push","fetch","signal","sent","json","filter","reqCtrl","ok","Error","message","abrupt","t0","stop","_x","apply","clearError","forEach","abortCtrl","abort"],"sources":["/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/src/shared/hooks/http-hook.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\n\nexport const useHttpClient = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, seterror] = useState();\n  const activeHttpRequest = useRef([]);\n  const sendRequest = useCallback(async (url, method = \"GET\", body = null, headers = {}) => {\n    setIsLoading(true);\n    const httpAbortCtrl = new AbortController();\n    activeHttpRequest.current.push(httpAbortCtrl);\n    try {\n      const response = await fetch(url, {\n        method,\n        body,      \n        headers,\n        signal: httpAbortCtrl.signal,\n      });\n      const responseData = await response.json();\n      activeHttpRequest.current = activeHttpRequest.current.filter(\n        (reqCtrl) => reqCtrl !== httpAbortCtrl\n      );\n      if (!response.ok) {\n        throw new Error(responseData.message);\n      }\n      setIsLoading(false);\n      return responseData;\n    } catch (error) {\n      seterror(error.message);\n      setIsLoading(false);\n      throw error;\n    }\n  },[])\n  const clearError = () => {\n    seterror(null);\n  };\n  useEffect(() => {\n    return () => {\n      activeHttpRequest.current.forEach((abortCtrl) => abortCtrl.abort());\n    };\n  }, []);\n  return { isLoading, error, sendRequest, clearError };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}