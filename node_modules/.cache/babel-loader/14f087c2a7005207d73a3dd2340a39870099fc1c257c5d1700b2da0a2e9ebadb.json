{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nexport const useHttpClient = () => {\n  _s();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, seterror] = useState();\n  const activeHttpRequest = useRef([]);\n  const sendRequest = useCallback(async (url, method = \"GET\", body = {}, header = {}) => {\n    setIsLoading(true);\n    debugger;\n    console.log(\"ðŸš€ ~ file: http-hook.js:8 ~ sendRequest ~ body:\", body);\n    body = JSON.stringify(body);\n    const httpAbortCtrl = new AbortController();\n    activeHttpRequest.current.push(httpAbortCtrl);\n    try {\n      const response = await fetch(url, {\n        method,\n        body,\n        header,\n        signal: httpAbortCtrl.signal\n      });\n      const responseData = await response.json();\n      activeHttpRequest.current = activeHttpRequest.current.filter(reqCtrl => reqCtrl !== httpAbortCtrl);\n      if (!response.ok) {\n        throw new Error(responseData.message);\n      }\n      setIsLoading(false);\n      return responseData;\n    } catch (error) {\n      seterror(error.message);\n      setIsLoading(false);\n      throw error;\n    }\n  }, []);\n  const clearError = () => {\n    seterror(null);\n  };\n  useEffect(() => {\n    return () => {\n      activeHttpRequest.current.forEach(abortCtrl => abortCtrl.abort());\n    };\n  }, []);\n  return {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  };\n};\n_s(useHttpClient, \"DKu4lzTRuRO3t3L3uieV+DCQLLc=\");","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","useHttpClient","_s","isLoading","setIsLoading","error","seterror","activeHttpRequest","sendRequest","url","method","body","header","console","log","JSON","stringify","httpAbortCtrl","AbortController","current","push","response","fetch","signal","responseData","json","filter","reqCtrl","ok","Error","message","clearError","forEach","abortCtrl","abort"],"sources":["/home/sourabh/Documents/0. Work/0. Project/MERN Stack/Client/src/shared/hooks/http-hook.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\n\nexport const useHttpClient = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, seterror] = useState();\n  const activeHttpRequest = useRef([]);\n  const sendRequest = useCallback(async (url, method = \"GET\", body = {}, header = {}) => {\n    setIsLoading(true);\n    debugger;\n    console.log(\"ðŸš€ ~ file: http-hook.js:8 ~ sendRequest ~ body:\", body)\n    body=JSON.stringify(body)\n\n    const httpAbortCtrl = new AbortController();\n    activeHttpRequest.current.push(httpAbortCtrl);\n    try {\n      const response = await fetch(url, {\n        method,\n        body,      \n        header,\n        signal: httpAbortCtrl.signal,\n      });\n      const responseData = await response.json();\n      activeHttpRequest.current = activeHttpRequest.current.filter(\n        (reqCtrl) => reqCtrl !== httpAbortCtrl\n      );\n      if (!response.ok) {\n        throw new Error(responseData.message);\n      }\n      setIsLoading(false);\n      return responseData;\n    } catch (error) {\n      seterror(error.message);\n      setIsLoading(false);\n      throw error;\n    }\n  },[])\n  const clearError = () => {\n    seterror(null);\n  };\n  useEffect(() => {\n    return () => {\n      activeHttpRequest.current.forEach((abortCtrl) => abortCtrl.abort());\n    };\n  }, []);\n  return { isLoading, error, sendRequest, clearError };\n};\n"],"mappings":";AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEhE,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGJ,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,CAAC;EACpC,MAAMO,iBAAiB,GAAGR,MAAM,CAAC,EAAE,CAAC;EACpC,MAAMS,WAAW,GAAGX,WAAW,CAAC,OAAOY,GAAG,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,CAAC,CAAC,EAAEC,MAAM,GAAG,CAAC,CAAC,KAAK;IACrFR,YAAY,CAAC,IAAI,CAAC;IAClB;IACAS,OAAO,CAACC,GAAG,CAAC,iDAAiD,EAAEH,IAAI,CAAC;IACpEA,IAAI,GAACI,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;IAEzB,MAAMM,aAAa,GAAG,IAAIC,eAAe,CAAC,CAAC;IAC3CX,iBAAiB,CAACY,OAAO,CAACC,IAAI,CAACH,aAAa,CAAC;IAC7C,IAAI;MACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACb,GAAG,EAAE;QAChCC,MAAM;QACNC,IAAI;QACJC,MAAM;QACNW,MAAM,EAAEN,aAAa,CAACM;MACxB,CAAC,CAAC;MACF,MAAMC,YAAY,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;MAC1ClB,iBAAiB,CAACY,OAAO,GAAGZ,iBAAiB,CAACY,OAAO,CAACO,MAAM,CACzDC,OAAO,IAAKA,OAAO,KAAKV,aAC3B,CAAC;MACD,IAAI,CAACI,QAAQ,CAACO,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACL,YAAY,CAACM,OAAO,CAAC;MACvC;MACA1B,YAAY,CAAC,KAAK,CAAC;MACnB,OAAOoB,YAAY;IACrB,CAAC,CAAC,OAAOnB,KAAK,EAAE;MACdC,QAAQ,CAACD,KAAK,CAACyB,OAAO,CAAC;MACvB1B,YAAY,CAAC,KAAK,CAAC;MACnB,MAAMC,KAAK;IACb;EACF,CAAC,EAAC,EAAE,CAAC;EACL,MAAM0B,UAAU,GAAGA,CAAA,KAAM;IACvBzB,QAAQ,CAAC,IAAI,CAAC;EAChB,CAAC;EACDR,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACXS,iBAAiB,CAACY,OAAO,CAACa,OAAO,CAAEC,SAAS,IAAKA,SAAS,CAACC,KAAK,CAAC,CAAC,CAAC;IACrE,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,OAAO;IAAE/B,SAAS;IAAEE,KAAK;IAAEG,WAAW;IAAEuB;EAAW,CAAC;AACtD,CAAC;AAAC7B,EAAA,CA3CWD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}