"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[925],{6925:function(e,t,n){n.r(t);var r=n(4165),a=n(5861),i=n(885),o=n(2791),c=n(4880),l=n(2302),s=n(3999),u=n(3373),f=n(291),p=n(5094),v=(n(8055),n(9508)),d=n(5434),h=n(9895),y=n(542),m=n(3108),x=n(184);t.default=function(){var e=(0,o.useContext)(m.V),t=(0,v.x)(),n=t.isLoading,j=t.error,b=t.sendRequest,g=t.clearError,C=(0,o.useState)(),k=(0,i.Z)(C,2),w=k[0],R=k[1],P=(0,c.useParams)().placeId,Z=(0,y.k6)(),E=(0,p.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),O=(0,i.Z)(E,3),N=O[0],V=O[1],A=O[2];(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("".concat("https://travel-share-backend.onrender.com/api","/places/").concat(P));case 3:t=e.sent,R(t.place),console.log("working"),A({title:{value:t.places.title,isValid:!0},description:{value:t.places.description,isValid:!0}},!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[b,P,A]);var _=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,b("".concat("https://travel-share-backend.onrender.com/api","/places/").concat(P),"PATCH",JSON.stringify({title:N.inputs.title.value,description:N.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 4:Z.push("/"+e.userId+"/places"),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return n?(0,x.jsx)("div",{className:"center",children:(0,x.jsx)(h.Z,{asOverlay:!0})}):w||j?(0,x.jsxs)(o.Fragment,{children:[j&&(0,x.jsx)(d.Z,{error:j,onClear:g}),!n&&w&&(0,x.jsxs)("form",{className:"place-form",onSubmit:_,children:[n&&(0,x.jsx)("div",{className:"center"}),(0,x.jsx)(l.Z,{id:"title",element:"input",type:"text",label:"Title",validators:[(0,f.hg)()],errorText:"Please enter a valid title.",onInput:V,initialValue:w.title,initialValid:!0}),(0,x.jsx)(l.Z,{id:"description",element:"textarea",label:"Description",validators:[(0,f.CP)(5)],errorText:"Please enter a valid description (min. 5 characters).",onInput:V,initialValue:w.description,initialValid:!0}),(0,x.jsx)(s.Z,{type:"submit",disabled:!N.isValid,children:"UPDATE PLACE"})]})]}):(0,x.jsx)("div",{className:"center",children:(0,x.jsx)(u.Z,{children:(0,x.jsx)("h2",{children:"Could not find place!"})})})}},542:function(e,t,n){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=n(4880),i=r(n(2791)),o=n(2610);n(2007),n(5501);var c=r(n(90));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}var p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createBrowserHistory(t.props),t}return s(t,e),t.prototype.render=function(){return i.createElement(a.Router,{history:this.history,children:this.props.children})},t}(i.Component),v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=o.createHashHistory(t.props),t}return s(t,e),t.prototype.render=function(){return i.createElement(a.Router,{history:this.history,children:this.props.children})},t}(i.Component),d=function(e,t){return"function"==typeof e?e(t):e},h=function(e,t){return"string"==typeof e?o.createLocation(e,null,null,t):e},y=function(e){return e},m=i.forwardRef;void 0===m&&(m=y);var x=m((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,o=f(e,["innerRef","navigate","onClick"]),c=o.target,s=l({},o,{onClick:function(t){try{a&&a(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return s.ref=y!==m&&t||n,i.createElement("a",s)})),j=m((function(e,t){var n=e.component,r=void 0===n?x:n,s=e.replace,u=e.to,p=e.innerRef,v=f(e,["component","replace","to","innerRef"]);return i.createElement(a.__RouterContext.Consumer,null,(function(e){e||c(!1);var n=e.history,a=h(d(u,e.location),e.location),f=a?n.createHref(a):"",x=l({},v,{href:f,navigate:function(){var t=d(u,e.location),r=o.createPath(e.location)===o.createPath(h(t));(s||r?n.replace:n.push)(t)}});return y!==m?x.ref=t||p:x.innerRef=p,i.createElement(r,x)}))})),b=function(e){return e},g=i.forwardRef;void 0===g&&(g=b);var C=g((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,u=e.activeStyle,p=e.className,v=e.exact,y=e.isActive,m=e.location,x=e.sensitive,C=e.strict,k=e.style,w=e.to,R=e.innerRef,P=f(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(a.__RouterContext.Consumer,null,(function(e){e||c(!1);var n=m||e.location,o=h(d(w,n),n),f=o.pathname,Z=f&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=Z?a.matchPath(n.pathname,{path:Z,exact:v,sensitive:x,strict:C}):null,O=!!(y?y(E,n):E),N="function"==typeof p?p(O):p,V="function"==typeof k?k(O):k;O&&(N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(N,s),V=l({},V,u));var A=l({"aria-current":O&&r||null,className:N,style:V,to:o},P);return b!==g?A.ref=t||R:A.innerRef=R,i.createElement(j,A)}))}));Object.defineProperty(t,"k6",{enumerable:!0,get:function(){return a.useHistory}})},90:function(e){var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},5501:function(e,t,n){n.r(t);t.default=function(e,t){}},8055:function(){}}]);
//# sourceMappingURL=925.b80d8612.chunk.js.map